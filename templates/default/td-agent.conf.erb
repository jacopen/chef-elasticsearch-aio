<% if node[:es_with_fluentd][:fluentd][:in_forward][:enabled] == "true" %>
<source>
  type forward
  port <%= node[:es_with_fluentd][:fluentd][:in_forward][:port] %>
</source>
<% end %>

<% if node[:es_with_fluentd][:fluentd][:http][:enabled] == "true" %>
<source>
  type http
  port <%= node[:es_with_fluentd][:fluentd][:http][:port] %>
</source>
<% end %>

<source>
  type tail
  format syslog
  path /var/log/syslog
  tag linux.syslog
  pos_file /tmp/syslog.pos
</source>
 
<match *.*>
  index_name fluentd
  type_name fluentd
  type elasticsearch
  include_tag_key true
  tag_key @log_name
  host localhost
  port 9200
  logstash_format true
  flush_interval 10s
</match>
